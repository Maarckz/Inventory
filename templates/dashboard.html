{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard-header">
    <div class="dashboard-stats">
        <div class="stat-card stat-primary">
            <div class="stat-icon">
                <i class="fas fa-laptop"></i>
            </div>
            <div class="stat-info">
                <span class="stat-label">{{ translate('Total de Máquinas') }}</span>
                <span class="stat-value">{{ active_count + inactive_count }}</span>
            </div>
        </div>

        <a href="/search?query=agent_info:status:active" style="color: inherit; text-decoration: none;">
            <div class="stat-card stat-success" style="cursor: pointer;">
                <div class="stat-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="stat-info">
                    <span class="stat-label">{{ translate('Ativas') }}</span>
                    <span class="stat-value">
                        {{ active_count }}
                    </span>
                </div>
            </div>
        </a>

        <a href="/search?query=agent_info:status:disconnected" style="color: inherit; text-decoration: none;">
            <div class="stat-card stat-danger" style="cursor: pointer;">
                <div class="stat-icon">
                    <i class="fas fa-times-circle"></i>
                </div>
                <div class="stat-info">
                    <span class="stat-label">{{ translate('Inativas') }}</span>
                    <span class="stat-value">
                        {{ inactive_count }}
                    </span>
                </div>
            </div>
        </a>
    </div>
</div>

<div class="chart-grid">
    <div class="chart-container">
        <div class="chart-header">
            <h3>{{ translate('Sistemas Operacionais') }}</h3>
        </div>
        <div class="chart-wrapper">
            <canvas id="osChart"></canvas>
        </div>
    </div>

    <div class="chart-container">
        <div class="chart-header">
            <h3>{{ translate('Processadores') }}</h3>
        </div>
        <div class="chart-wrapper">
            <canvas id="cpuChart"></canvas>
        </div>
    </div>

    <div class="chart-container">
        <div class="chart-header">
            <h3>{{ translate('Memória RAM') }}</h3>
        </div>
        <div class="chart-wrapper">
            <canvas id="ramChart"></canvas>
        </div>
    </div>
</div>
<br>

<div class="chart-grid">
    <div class="chart-container">
        <div class="chart-header">
            <h3>{{ translate('Portas de Rede Mais Comuns') }}</h3>
        </div>
        <div class="chart-wrapper">
            <canvas id="portChart"></canvas>
        </div>
    </div>

    <div class="chart-container">
        <div class="chart-header">
            <h3>{{ translate('Processos Mais Comuns') }}</h3>
        </div>
        <div class="chart-wrapper">
            <canvas id="processChart"></canvas>
        </div>
    </div>
</div>
{% endblock %}